<div class="users-mypage">
  <% if @user.present? %>
    <div class="box-wrapper">
      <% if @user.share_host_info == 15 %>
        <div class="share-info">
          シェア可能（ホスト）
        </div>
      <% else %>
        <div class="share-info share-info-false">
          シェア不可（ホスト）
        </div>
      <% end %>
      <% if @user.share_user_info == 13 %>
        <div class="share-info">
          シェア可能（ユーザー）
        </div>
      <% else %>
        <div class="share-info share-info-false">
          シェア不可（ユーザー）
        </div>
      <% end %>

      <h1><%= @user.name %></h1>
      <div class="profile-icon">
        <%= image_tag(@user.icon, class: 'icon') %>
      </div>
      <p><%= @user.username %></p>
      <p>E-mail : <%= @user.email %></p>
      <p>About   : <%= @user.about %></p>
      <br>
      <div class="pet-list">
      <h3>ペットリスト</h3>
        <% if @user.pets.present? %>
          <% @user.pets.each do |pet| %>
            <div class="pet">
              <% if pet.share_flag %>
                <div class="share-info">
                  シェア可能
                </div>
              <% else %>
                <div class="share-info share-info-false">
                  シェア不可
                </div>
              <% end %>
              <a href="<%= cg_pets_path petname: pet.petname %>">
                <table>
                  <tr>
                    <td><%= image_tag(pet.icon, class:'icon') %></td>
                  </tr>
                  <tr>
                    <td><p><%= pet.name %></p></td>
                  </tr>
                </table>
              </a>
            </div>
          <% end %>
        <% else %>
          <p>ペットは登録されていません</p>
        <% end %>
      </div>

      <div class="user-detail">
        <h2>詳細情報</h2>
        <p>(※企業の方は「性別」「年齢」の記載は不要です)</p>
        <% detail = @user.detail %>
        <table class='table'>
          <tr <%= 'class = empty' unless detail.last_name.present? %>>
            <th>姓</th>
            <td><%= detail.last_name.presence || '未登録' %></td>
          </tr>
          <tr <%= 'class = empty' unless detail.first_name.present? %>>
            <th>名</th>
            <td><%= detail.first_name.presence || '未登録' %></td>
          </tr>
          <tr <%= 'class = empty' unless detail.age.present? %>>
            <th>年齢</th>
            <td><%= detail.age.presence || '未登録' %></td>
          </tr>
          <tr <%= 'class = empty' if detail.sex_info == 100 %>>
            <th>性別</th>
            <td><%= detail.sex.value %></td>
          </tr>
          <tr <%= 'class = empty' if detail.country_info == 100 %>>
            <th>国籍</th>
            <td><%= detail.country.value %></td>
          </tr>
          <tr <%= 'class = empty' unless detail.address.present? %>>
            <th>住所</th>
            <td><%= detail.address.presence || '未登録' %></td>
          </tr>
          <tr <%= 'class = empty' if detail.document_info == 100 %>>
            <th>本人確認書類</th>
            <td><%= detail.document.value %></td>
          </tr>
        </table>
      </div>
      <div class="edit-prof">
        <%= link_to '新規ペット追加', cg_pets_new_path, class: 'mb-1' %>
        <br>
        <%= link_to 'プロフィールを編集', cg_settings_users_path %>
      </div>
    <% else %>
      <p>urlが間違っています</p>
    <% end %>
  </div>
</div>